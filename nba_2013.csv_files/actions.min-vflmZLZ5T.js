define(["require","exports","external/react","modules/clean/ajax","modules/clean/downloads","modules/clean/multiaccount_login","modules/clean/react/copy_to_dropbox/modal","modules/clean/react/modal","modules/clean/sharing/signup_modal_proxy","modules/clean/viewer","modules/core/browser","modules/core/exception","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,o,r,n,t,l,u,i,s,a,d,c,f,m,_){"use strict";return new((function(){function e(){}return e.prototype.direct=function(e){var o=function(){var o=function(){var o=function(){m.error(f._("Failed to download."))},r=function(o){if(o===e.url){var r=_.parse(e.url).updateQuery({dl:"1"}).toString();t.get({url:r,__do_not_use_expected_domain:"dl.dropboxusercontent.com"})}else t.get({url:o})},l=e.url;n.SilentBackgroundRequest({url:"/sharing/fetch_user_content_link",data:{url:l},success:r,error:o})};if(!e.downloadTestUrl)return void o();var r=function(){m.error(f._("Failed to download zip file."))},l=function(e){"OK"===e?o():0===e.indexOf("err:")?m.error(f._("The zip file is too large.")):r()};n.SilentBackgroundRequest({url:e.downloadTestUrl,success:l,error:r})};return s.signupForDirectDownload().then(o)},e.prototype.toDropbox=function(e,o,n,t){var f,m;if("anonymous"===n)f=s.signup(),m=d.reload;else{var _=t?t.id:-1;c.assert(_!==-1,"role isn't anonymous => user cannot be null or undefined!"),f=new Promise(function(e){a.Viewer.get_viewer().is_user_signed_in(t)?e(_):l.show_modal({role:n,on_success:function(){e(_)}})})}f.then(function(t){var l=r.createElement(u.CopyToDropboxModal,{shareToken:e,fileOrFolder:o,userId:t,role:n,onDismiss:m});i.Modal.showInstance(l)})},e})())});
//# sourceMappingURL=actions.min.js-vflvxtJMz.map