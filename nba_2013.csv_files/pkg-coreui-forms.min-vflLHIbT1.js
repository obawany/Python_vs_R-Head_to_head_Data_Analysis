define("modules/clean/form",["require","exports","external/purify","jquery","modules/clean/ajax","modules/core/cookies","modules/core/exception","modules/core/i18n","modules/core/notify"],function(e,r,t,s,o,n,a,i){"use strict";var p=i._("There was a problem completing this request."),u={submit:function(e,r,t,s){return o.FormWebRequest({url:e.attr("action"),data:this.collect_data(e),skipErrorHandling:!0,success:function(e,s,o){var n=Array.from(u.parse_response(o.responseText)),a=n[0],i=n[1];return a?r(i):t(i)},error:function(e,r,s){return t(p)},complete:s})},collect_data:function(e){for(var r={},t=0,o=Array.from(e.find("input, select, textarea"));t<o.length;t++){var n=o[t],a=s(n).attr("name");if(a){var i;if("checkbox"===s(n).attr("type"))i=s(n).prop("checked")?"True":"";else if("radio"===s(n).attr("type")){if(!s(n).prop("checked"))continue;i=s(n).val()}else i=s(n).val();a in r?("string"==typeof r[a]&&(r[a]=[r[a]]),r[a].push(i)):r[a]=i}}return r},parse_response:function(e){if(0!==e.indexOf("err:"))return[!0,e];var r=e.substr(4);try{return[!1,JSON.parse(r)]}catch(e){return[!1,r||p]}},parse_error:function(e){if("string"==typeof e)return[!0,e];if("object"==typeof e)for(var r in e){var t=e[r];if("message_text"in t)return[!0,t.message_text]}return[!1,p]},add_vars:function(e,r,o){return void 0===o&&(o=!1),(function(){for(var n=[],a=0,i=Object.keys(r||{});a<i.length;a++){var p=i[a],u=s("<input>",{type:"hidden",name:p});u.val(r[p]);var l=t.sanitize(u.prop("outerHTML"));o===!0&&s("input[name='"+p+"']").remove(),n.push(e.append(l))}return n})()},post_request:function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={}),a.assert(null!=e,"post_request missing action");var i=s("<form>",{action:e,method:"POST",target:o.target?o.target:void 0});r.t=n.read("__Host-js_csrf"),this.add_vars(i,r);var p=s(t.sanitize(i.prop("outerHTML")));return s("body").append(p),p.submit()}};return u}),define("modules/clean/react/form_error_mixin",["require","exports","external/react","external/lodash"],function(e,r,t,s){"use strict";var o=t.DOM;return{propTypes:{errorWrapperClassName:t.PropTypes.string,errorWrapperIdName:t.PropTypes.string,"disable-errors":t.PropTypes.bool,"error-after":t.PropTypes.bool,error:t.PropTypes.shape({message_text:t.PropTypes.string,message_html:t.PropTypes.string})},getInitialState:function(){return{errorWrapperIdName:this.props.errorWrapperIdName?this.props.errorWrapperIdName:s.uniqueId("error-message")}},renderErrorIfEnabled:function(){if(!this.props["disable-errors"])return this.renderError()},renderError:function(){return null!=(null!=this.props.error?this.props.error.message_html:void 0)?o.div({id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName,dangerouslySetInnerHTML:{__html:this.props.error.message_html}}):o.div({id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName},null!=this.props.error?this.props.error.message_text:void 0)}}}),define("modules/clean/react/input",["require","exports","external/classnames","external/create-react-class","external/react","external/react-dom","external/lodash","jquery","modules/clean/keycode","modules/clean/react/form_error_mixin","modules/clean/react/sprite","modules/core/i18n"],function(e,r,t,s,o,n,a,i,p,u,l,d){"use strict";function c(e,r){void 0===r&&(r=!1);var t=function(r){if(e>=r)return"password-input-dot-selected"},s="password-input-meter";r&&(s="password-input-meter-standalone");var o=f.div({className:s,ref:"meter"},f.div({className:"password-input-dot "+t(4)}),f.div({className:"password-input-dot "+t(3)}),f.div({className:"password-input-dot "+t(2)}),f.div({className:"password-input-dot "+t(1)}));return r?f.span({className:"standalone-password-meter-container"},o):o}Object.defineProperty(r,"__esModule",{value:!0});var h=o.createElement,f=o.DOM;r.password_strength_meter=c;var m=function(r,m){return s({displayName:r+"."+m,propTypes:{expandable:o.PropTypes.bool,expandedWidthOffset:o.PropTypes.number,animationCurve:o.PropTypes.string,animationDuration:o.PropTypes.number,onCloseClick:o.PropTypes.func,defaultValue:o.PropTypes.string,value:o.PropTypes.string,autofocus:o.PropTypes.bool,autoresize:o.PropTypes.bool,inline:o.PropTypes.bool,className:o.PropTypes.string,valueLink:o.PropTypes.object,variant:o.PropTypes.string,id:o.PropTypes.string,label:o.PropTypes.string,afterRender:o.PropTypes.func,onClick:o.PropTypes.func,onFocus:o.PropTypes.func,onBlur:o.PropTypes.func,onKeyDown:o.PropTypes.func,onChange:o.PropTypes.func,compatiblePlaceholder:o.PropTypes.bool,placeholder:o.PropTypes.string,measureStrength:o.PropTypes.bool,error:o.PropTypes.shape({message_text:o.PropTypes.string,message_html:o.PropTypes.string}),closeOnBlur:o.PropTypes.bool},mixins:[u],getDefaultProps:function(){return{errorWrapperClassName:"text-input-error-wrapper",expandedWidthOffset:90,expandable:!1,animationCurve:"easeOutSine",animationDuration:300,compatiblePlaceholder:!1}},getInitialState:function(){return{inputWidth:0,expanded:!1,value:this.props.defaultValue}},componentWillMount:function(){var r=this;if(this.props.measureStrength)return e(["external/zxcvbn"],function(e){return r.setState({zxcvbn:e})})},componentDidMount:function(){this._renderFinished();var e=n.findDOMNode(this.refs.inputComponent).offsetWidth;return this.setState({inputWidth:e})},componentDidUpdate:function(){return this._renderFinished()},render:function(){var e={"text-input-input":!0,autofocus:this.props.autofocus,"password-input":"password"===m},s={"text-input":!0,"text-input-expandable":this.props.expandable,"text-input-inline":this.props.inline,"textarea-input":"textarea"===r};if(s[this.props.variant||"standard"]=!0,null!=this.props.className)for(var o=0,n=Array.from(this.props.className.split(/\s/));o<n.length;o++){var i=n[o];s[i]=!0}var p=this.renderErrorIfEnabled(),u=void 0;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(u=this.state.errorWrapperIdName);var c=a.omit(this.props,"expandable","expandedWidthOffset","animationCurve","animationDuration","onCloseClick","defaultValue","value","autofocus","autoresize","inline","className","valueLink","variant","id","name","label","afterRender","onClick","onFocus","onBlur","onKeyDown","onChange","compatiblePlaceholder","placeholder","measureStrength","error","error-after","disable-errors","errorWrapperClassName","closeOnBlur"),v=f[r](a.assignIn({id:this.props.id,name:this.props.name,"aria-describedby":u,className:t(e),type:m,value:this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value,onChange:this.onChangeInternal,onFocus:this.onFocusInternal,onBlur:this.onBlurInternal,onKeyDown:this.onKeyDownInternal,autoFocus:this.props.autofocus,ref:"inputComponent",placeholder:this.props.placeholder||""},c));return f.div({className:t(s)},this.props["error-after"]?void 0:p,f.div({className:"text-input-wrapper"},this._renderPasswordStrengthBar(),v,this.props.expandable?f.a({href:"#",onClick:this.onCloseClick,ref:"closeButton",className:"close-button u-mar-left-xs"},h(l,{group:"web",name:"xclose",alt:d._("Close")})):void 0,this.props.label&&!(this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value)?f.label({htmlFor:this.props.id},this.props.label):void 0),this.props["error-after"]?p:void 0)},getValue:function(){return n.findDOMNode(this.refs.inputComponent).value},setValue:function(e){return n.findDOMNode(this.refs.inputComponent).value=e,this.setState({value:e})},resizeComponent:function(){var e=n.findDOMNode(this.refs.inputComponent),r=i(e);return r.css("height","1px"),r.css("height",e.scrollHeight+"px")},_renderPasswordStrengthBar:function(){return this.props.measureStrength?c(this.state.score):null},_renderFinished:function(){return this.props.autoresize&&this.resizeComponent(),"function"==typeof this.props.afterRender?this.props.afterRender():void 0},onCloseClick:function(e){if(null!=e&&e.preventDefault(),!this.props.expandable)return void("function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e));var r=i(n.findDOMNode(this.refs.closeButton)),t=i(n.findDOMNode(this.refs.inputComponent));return r.stop().animate({opacity:0},this.props.animationDuration),t.stop().animate({width:this.state.inputWidth},this.props.animationDuration,this.props.animationCurve),"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e),this.setState({expanded:!1})},onChangeInternal:function(e){if("function"==typeof this.props.onChange&&this.props.onChange(e),null!=this.props.value||(this.props.valueLink?this.props.valueLink.requestChange(e.target.value):this.setState({value:e.target.value})),this.props.measureStrength){var r=void 0;return r=this.state.zxcvbn&&e.target.value?Math.max(1,this.state.zxcvbn(e.target.value).score):0,this.setState({score:r})}},onFocusInternal:function(e){var r=this;if("function"==typeof this.props.onFocus&&this.props.onFocus(e),this.props.expandable!==!1){var t=i(e.target),s=i(n.findDOMNode(this.refs.closeButton)),o=this.state.inputWidth;0===o&&(o=n.findDOMNode(this.refs.inputComponent).offsetWidth,this.setState({inputWidth:o}));var a=o+this.props.expandedWidthOffset,p=parseInt(t.css("padding-right")),u=a-p+s.width()/2;return s.css({left:u}),t.stop().animate({width:a},this.props.animationDuration,this.props.animationCurve,function(){return s.stop().animate({opacity:1},r.props.animationDuration)}),this.setState({expanded:!0})}},onBlurInternal:function(e){var r=e.target.value;return this.props.closeOnBlur===!0&&0===r.length&&this.onCloseClick(),"function"==typeof this.props.onBlur?this.props.onBlur(e):void 0},onKeyDownInternal:function(e){if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),null!=this.state.expanded!=!1)switch(e.keyCode){case p.KeyCode.ESC:return e.target.blur(),this.onCloseClick()}}})};r.password=m("input","password"),r.text=m("input","text"),r.textarea=m("textarea","text")});
//# sourceMappingURL=pkg-coreui-forms.min.js-vfl8ixY1B.map