define(["require","exports","tslib","external/classnames","external/react","modules/clean/filepath","modules/clean/react/bubble_menu","modules/clean/react_format","modules/clean/react/file_viewer/actions","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/utils","modules/clean/react/share_download/util","modules/clean/react/share_download/models","modules/clean/react/share_download/util","modules/clean/react/title_bubble","modules/core/i18n","modules/core/browser"],function(t,e,o,i,n,s,r,l,a,p,c,d,u,h,m,b,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=function(t){return f.is_mobile_or_tablet()||!t.title?n.Children.only(t.children):n.createElement(m.TitleBubble,{content:t.title,isTargetPositionFixed:!0,position:m.TitleBubble.POSITIONS.BOTTOM_ALIGN_RIGHT,distanceFromTarget:10},t.children)},D=(function(t){function e(e){var o=t.call(this,e)||this;return o.state={isDisabled:!0},o}return o.__extends(e,t),e.prototype.componentDidMount=function(){this.setState({isDisabled:this.props.isDisabled})},e.prototype.render=function(){var t={"c-btn":!0,"download-button":!0,control__button:!0};return t["button-"+this.props.importance]=!0,t["c-btn--"+this.props.importance]=!0,this.props.className&&(t[this.props.className]=!0),n.createElement(_,{title:this.props.title},n.createElement("button",{id:"download-menu-button",className:i(t),style:{display:"-webkit-box"},disabled:this.state.isDisabled,onClick:this.props.onClick},this.props.children))},e.defaultProps={isDisabled:!1,importance:"secondary"},e})(n.Component),g=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.render=function(){var t=this,e=function(e){e.preventDefault(),t.props.onClick&&t.props.onClick(t.props.option),t.props.option.handler(),a.logUserAction(t.props.option.userAction,c.getSplitButtonUserActionContext(p.SplitButtonActionLocation.Main,t.props.location))};return n.createElement(D,{isDisabled:this.props.isDisabled,onClick:e,importance:this.props.importance},this.props.targetText)},e})(n.Component);e.DownloadSimpleButton=g;var w=(function(t){function e(e){var o=t.call(this,e)||this;return o.state={isDisabled:!0},o}return o.__extends(e,t),e.prototype.componentDidMount=function(){this.setState({isDisabled:this.props.isDisabled})},e.prototype.renderDropdownButton=function(){var t={"c-btn":!0,"download-button":!0,control__button:!0,disabled:this.state.isDisabled};return t["button-"+this.props.importance]=!0,t["c-btn--"+this.props.importance]=!0,n.createElement("button",{className:i(t)},this.props.targetText)},e.prototype.renderMenu=function(t){var e=this,o=this.props.options.map(function(t){return n.createElement(r.BubbleMenuItem,{onClick:d.callOptionHandler(t,p.SplitButtonActionLocation.Split,e.props.onClick,e.props.location),disabled:t.isDisabled},t.text)}),i=this.props.justifyRight?r.BubbleMenu.POSITIONS.BOTTOM_ALIGN_RIGHT:r.BubbleMenu.POSITIONS.BOTTOM;return n.createElement(r.BubbleMenu,{targetButton:t,position:i,verticalDisplacement:4,className:"react-file-viewer-dropdown",items:o})},e.prototype.render=function(){return this.props.isDisabled?n.createElement(D,{isDisabled:!0,importance:this.props.importance,title:this.props.title},this.props.targetText):this.renderMenu(this.renderDropdownButton())},e.defaultProps={justifyRight:!0,importance:"secondary"},e})(n.Component),T=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isDownloadAllowed=function(){return this.props.sharePermissions.canDownloadRoles.length>0},e.prototype.getTargetText=function(t){if(this.isDownloadAllowed())return t>1?b._("Download â–¾"):b._("Download");if(this.props.user&&this.props.user.is_cdm_member){var e=s.filename(this.props.user.cdm_tmf_path);return e.length>25?b._("Add to my member folder"):l.reactFormat(b._("Add to <strong>%(cdm_tmf_name)s</strong> folder"),{cdm_tmf_name:e,strong:n.createElement("strong",{style:{fontWeight:800}})})}return b._("Add to Dropbox")},e.prototype.getTooltipLabel=function(){return this.props.fileOrFolder&&null===this.props.fileOrFolder.ns_id?b._("Download is unavailable while file is uploading."):b._("Downloads disabled.")},e.prototype.render=function(){var t=h.getDownloadOptions(this.props.sharePermissions,this.props.sharedLinkInfo,this.props.shareToken,this.props.fileOrFolder);if(this.props.downloadOnly){var e=new u.ShareDownloadActionOption({isDisabled:!0}),o=!0;return this.isDownloadAllowed()&&(e=u.ShareDownloadActionOption.buildDirectOption(this.props.sharedLinkInfo),o=!1),n.createElement(g,{isDisabled:o,targetText:b._("Download"),option:e,onClick:this.props.onClick,location:this.props.location,importance:this.props.importance})}return 0===t.length?n.createElement(w,{targetText:b._("Download"),isDisabled:!0,options:[new u.ShareDownloadActionOption({isDisabled:!0})],justifyRight:this.props.justifyRight,onClick:this.props.onClick,location:this.props.location,title:this.getTooltipLabel(),importance:this.props.importance}):1===t.length?n.createElement(g,{isDisabled:!1,targetText:this.getTargetText(t.length),option:t[0],onClick:this.props.onClick,location:this.props.location,importance:this.props.importance}):n.createElement(w,{targetText:this.getTargetText(t.length),options:t,justifyRight:this.props.justifyRight,onClick:this.props.onClick,location:this.props.location,isDisabled:!1,importance:this.props.importance})},e})(n.Component);e.ShareDownloadButton=T});
//# sourceMappingURL=button_component.min.js-vflYrHdEk.map