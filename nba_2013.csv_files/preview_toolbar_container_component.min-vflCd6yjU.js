define(["require","exports","tslib","external/classnames","external/react","external/react-redux","modules/clean/annotations/preview_image_annotations_toolbar","modules/clean/comments/action_creators","modules/clean/comments/demo_action_creators","modules/clean/comments/logging","modules/clean/comments/store","modules/clean/comments/utils","modules/clean/comments/constants","modules/clean/react/previews/preview_toolbar","modules/clean/react/previews/preview_toolbar_region_creation","modules/clean/previews/preview_toolbar_store","modules/clean/react/file_viewer/data/selectors","modules/constants/comments_panel","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/sidebar_helpers","modules/clean/react/previews/pdf_viewer/utils"],function(e,o,t,n,i,r,a,s,l,c,p,m,u,d,C,b,g,v,T,h,_){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var f=(function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.getComponentState=function(){return{canAnnotate:m.canAnnotate(o.props.isFullscreen),regionCreationEnabled:p.state.regionCreationEnabled,hideToolbar:b.PreviewToolbarStore.state.hideToolbar}},o.state=o.getComponentState(),o.onStateChange=function(){return o.setState(o.getComponentState())},o.logRegionCreationClick=function(e){c.logEvent(e,u.FileActivityLogClientOriginType.ANNOTATION_MODE_BUTTON_IN_TOOLBAR)},o.onRegionCreationClick=function(){o.logRegionCreationClick(u.FileActivityLogEventType.CLIENT_ANNOTATION_MODE_ENABLED),o.commentsActionCreators.setRegionCreationEnabled(!0)},o.onRegionCreationDoneClick=function(){o.logRegionCreationClick(u.FileActivityLogEventType.CLIENT_ANNOTATION_MODE_DISABLED),o.commentsActionCreators.setRegionCreationEnabled(!1)},o.onSidebarOpen=function(e){o.props.onSidebarOpen(o.getDocType(),e)},o.onSidebarClose=function(e){o.props.onSidebarClose(o.getDocType(),e)},o}return t.__extends(o,e),o.prototype.getCommentsActionCreators=function(){return this.props.isCommentsDemo?l:s},o.prototype.componentDidMount=function(){this.unsubscribeCommentsStore=p.listen(this.onStateChange),this.unsubscribePreviewToolbarStore=b.PreviewToolbarStore.listen(this.onStateChange),this.commentsActionCreators=this.getCommentsActionCreators()},o.prototype.componentWillUnmount=function(){this.unsubscribeCommentsStore(),this.unsubscribePreviewToolbarStore(),this.state.regionCreationEnabled&&this.commentsActionCreators.setRegionCreationEnabled(!1)},o.prototype.getDocType=function(){var e=this.props.previewToolbarProps;return e.fileExtension?_.docTypeFromExtension(e.fileExtension):T.DocType.default},o.prototype.render=function(){var e=this.props.previewToolbarProps,o=this.state.regionCreationEnabled&&this.state.canAnnotate,r=v.ALLOW_VIEW_ANNOTATE_MODES&&this.state.canAnnotate&&!this.props.forceDisableRegionAnnotation,s=null,l=this.props.isSidebarOpen[this.getDocType()];if(this.props.shouldUseImageToolbar)o||(s=i.createElement(a.PreviewImageAnnotationsToolbar,t.__assign({},this.props.previewToolbarProps,{ref:"previewToolbar",onRegionCreationClick:this.onRegionCreationClick,canEnableRegionCreation:r})));else{var c=!!e.isHidden||o||this.state.hideToolbar;s=i.createElement(d.PreviewToolbar,t.__assign({},e,{isSidebarOpen:l,onSidebarOpen:this.onSidebarOpen,onSidebarClose:this.onSidebarClose,ref:"previewToolbar",onRegionCreationClick:this.onRegionCreationClick,isHidden:c,shouldDisplayRegionCreationButton:r}))}var p=null;o&&(p=i.createElement(C.PreviewToolbarRegionCreation,{onRegionCreationDoneClick:this.onRegionCreationDoneClick}));var m=n({"preview-toolbar-container":!0,"preview-toolbar-container--elevated":!!this.props.elevateToolbar});return i.createElement("div",{className:m},s,p)},o})(i.Component);o.PreviewToolbarContainerInternal=f,o.PreviewToolbarContainer=r.connect(function(e){return{isFullscreen:g.getIsFullScreen(e),isSidebarOpen:g.getIsSidebarOpen(e)}},h.mapDispatchToProps,void 0,{withRef:!0})(f)});
//# sourceMappingURL=preview_toolbar_container_component.min.js-vflPN1Apy.map