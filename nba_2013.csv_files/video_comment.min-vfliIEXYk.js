define(["require","exports","tslib","external/react","modules/clean/video_annotations_prototype/components/time_button","modules/clean/video_annotations_prototype/video_annotation_prototype_helper","modules/clean/avatar/photo_avatar","modules/clean/avatar/viewer_avatar","modules/clean/datetime","modules/clean/react/sprite_div","modules/clean/video_annotations_prototype/components/avatar","modules/clean/video_annotations_prototype/components/video_comment_input_box"],function(e,t,n,o,a,l,r,m,i,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={shouldShowInputBox:!1},t.startReply=function(){t.setState({shouldShowInputBox:!0})},t.cancelReply=function(){t.setState({shouldShowInputBox:!1})},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.user,n=e.replyToComment;return this.state.shouldShowInputBox?o.createElement("div",{className:"comment-thread__reply-footer"},o.createElement(d.VideoCommentInputBox,{isReply:!0,user:t,addComment:n,cancelReply:this.cancelReply})):o.createElement("div",{className:"comment-thread__reply-footer"},o.createElement("div",{className:"commenter-photo"},o.createElement(c.CommenterAvatar,{user:t})),o.createElement("button",{className:"reply-button button-as-link",onClick:this.startReply},"Reply"))},t})(o.Component);t.SubthreadFooter=p;var u,v=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDeleteClick=function(){var e=t.props,n=e.comment;(0,e.deleteComment)(n)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.comment,n=e.deleteComment,s=e.user,d=e.videoLength,p=t.comment_text,u=t.comment_metadata.frame_time,v=t.commenter_info,h=v.dbx_account_id,_=v.display_name,y=v.photo_circle_url,f=t.when_created,E=t.is_deleted,C=t.permissions.can_delete;if(E)return null;var b=o.createElement(c.InitialsAvatar,{displayName:_});s&&h===s.account_id?b=o.createElement(m,{photoUrl:s.photo_circle_url,alt:_,dimension:24,defaultAvatar:b}):y&&(b=o.createElement(r.PhotoAvatar,{photoUrl:y,alt:_,dimension:24}));var N="reply_count"in t,R=N&&o.createElement(a.TimeButton,{time:l.VideoAnnotationPrototypeHelper.unitConvertDomainObjectTimeToSeconds(u),videoLength:d});return o.createElement("div",{className:"single-comment-holder"},o.createElement("div",{className:"commenter-photo"},b),o.createElement("div",{className:"comment"},o.createElement("div",null,o.createElement("span",{className:"commenter-name"},_),o.createElement("span",{className:"comment-spacer"}),o.createElement("span",{className:"comment-when"},i.ago(f,!1,!0,!0)),C&&n&&[o.createElement("span",{className:"comment-dot"}," Â· "),o.createElement("button",{className:"delete-button button-as-link",onClick:this.handleDeleteClick},"Delete")]),o.createElement("div",{className:"comment-body"},p,R)))},t})(o.Component);(function(e){e[e.Active=0]="Active",e[e.DeletedActiveReplies=1]="DeletedActiveReplies",e[e.DeletedNoActiveReplies=2]="DeletedNoActiveReplies"})(u||(u={}));var h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleResolveClick=function(){var e=t.props,n=e.comment;(0,e.resolveComment)(n)},t.handleBeginReply=function(){var e=t.props,n=e.comment,o=n.comment_gid,a=n.is_deleted,l=n.is_resolved,r=e.beginReply;!r||a||l||r(o)},t}return n.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.beginReply,a=t.comment,l=t.deleteComment,r=t.resolveComment,m=t.replyToComment,i=t.user,c=t.videoLength,d=a.comment_gid,h=a.is_deleted,_=a.is_resolved,y=a.permissions.can_resolve,f=a.reply_comments;if(e=h?f.filter(function(e){return!e.is_deleted}).length>0?u.DeletedActiveReplies:u.DeletedNoActiveReplies:u.Active,_||e===u.DeletedNoActiveReplies)return null;var E=n&&i&&!h;return o.createElement("div",{className:"comment-thread"},y&&r&&o.createElement("div",{className:"comment-thread__header"},o.createElement("button",{className:"resolve-button",onClick:this.handleResolveClick},o.createElement(s,{group:"web",name:"s_greycheck",text:"Resolve",spritePosition:"right"}))),e===u.Active&&o.createElement(v,{key:d,comment:a,deleteComment:l,user:i,videoLength:c})||o.createElement("div",{className:"single-comment-holder"},"This comment was deleted, but had some replies before it was deleted. They are shown below."),f.map(function(e){return o.createElement(v,{key:e.comment_gid,comment:e,deleteComment:l,user:i,videoLength:c})}),E&&o.createElement(p,{handleReply:this.handleBeginReply,user:i,replyToComment:m}))},t})(o.Component);t.VideoCommentSubthread=h});
//# sourceMappingURL=video_comment.min.js-vflkU9-av.map