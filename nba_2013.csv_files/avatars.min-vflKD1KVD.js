define(["require","exports","tslib","external/react","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar","modules/clean/avatar/style","modules/clean/avatar/viewer_avatar","modules/clean/datetime","modules/clean/em_string","modules/clean/react/pass/constants","modules/clean/react/pass/utils","modules/clean/react/title_bubble","modules/clean/react_format","modules/core/browser","modules/core/user_i18n","modules/core/i18n"],function(e,t,o,n,r,a,s,i,l,u,p,c,m,d,h,f,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=(function(e){function t(t){var o=e.call(this,t)||this;return o.state={loadResult:"loaded"},o}return o.__extends(t,e),t.prototype.getInitialsColor=function(){},t.prototype.render=function(){var e=this.wrapAvatarWithTooltip(),t="pending"===this.state.loadResult?"react-pass__face-no-display":"react-pass__face-container";return n.createElement("div",{className:t},e)},t.prototype.wrapAvatarWithTooltip=function(){return n.createElement(m.TitleBubble,{content:this.getTooltipElement(),position:m.TitleBubble.POSITIONS.BOTTOM,distanceFromTarget:9,isTargetPositionFixed:!0,onMouseEnter:this.props.onMouseEnter,className:this.getTooltipClass(),backgroundColor:this.getInitialsColor()},n.createElement("button",{className:"pass-facepile-avatar"},this.getAvatar()))},t})(n.Component),g=(function(e){function t(t){var o=e.call(this,t)||this;return o.state={loadResult:null==o.props.userInfo.photoUrl?"loaded":"pending"},o.boundOnLoad=o.onFinalize.bind(o,!0),o.boundOnError=o.onFinalize.bind(o,!1),o}return o.__extends(t,e),t.prototype.offlineTooltipTemplate=function(){return _._("<b>%(user_name)s</b> <newline/> Viewed %(ago)s",{comment:'Format like "userName <newline> Viewed 5 days ago"'}).replace("%(ago)s",l.ago(1e3*this.props.userInfo.whenLastSeen,!1,!0,!0))},t.prototype.onlineTooltipTemplate=function(){return _._("<b>%(user_name)s</b> <newline/> Viewing now",{comment:'Format like "user_name <newline> Viewing now"'})},t.prototype.accessNameTooltipTemplate=function(e){switch(e){case"owner":return _._("<b>%(user_name)s</b> <newline/> Owner",{comment:'Format like "user_name <newline> Owner"'});case"writer":return _._("<b>%(user_name)s</b> <newline/> Can edit",{comment:'Format like "user_name <newline> Can edit"'});case"reader":return _._("<b>%(user_name)s</b> <newline/> Can comment",{comment:'Format like "user_name <newline> Can comment"'});case"reader_no_comment":case void 0:return _._("<b>%(user_name)s</b> <newline/> Can view",{comment:'Format like "user_name <newline> Can view"'})}},t.prototype.isGuestAvatar=function(){return this.props.userInfo.userId&&c.AnonymousViewerUtils.isAnonymousUserId(this.props.userInfo.userId)},t.prototype.getUserAvatarProps=function(){var e=this.props.userInfo,t=e.displayName,r=e.isActive,s=this.isGuestAvatar()?c.AnonymousViewerUtils.getAnonymousViewerInitials(t):f.getInitials(t),i={dimension:32,initials:s,color:this.getInitialsColor(),shape:"CIRCLE"};r||(i.optionalClass="c-avatar--inactive",h.msie&&(i.color="#7B8994"));var l=n.createElement(a.InitialsAvatar,o.__assign({},i));return r||(l=n.createElement("span",{className:"c-avatar-initials-wrapper"},l)),{alt:t,dimension:32,photoUrl:this.getEffectivePhotoUrl(),defaultAvatar:l,optionalClass:i.optionalClass,shape:"CIRCLE",onLoad:this.boundOnLoad,onError:this.boundOnError}},t.prototype.getEffectivePhotoUrl=function(){return"error"===this.state.loadResult?void 0:this.props.userInfo.photoUrl},t.prototype.getAvatar=function(){var e=this.getUserAvatarProps();return this.props.userInfo.isViewer&&"error"!==this.state.loadResult?n.createElement(i,o.__assign({},e)):n.createElement(r,o.__assign({},e))},t.prototype.onFinalize=function(e){if(null!=this.getEffectivePhotoUrl()){this.setState({loadResult:e?"loaded":"error"});var t=this.props,o=t.userInfo.photoUrl,n=t.onLoad;n&&o&&n(o)}},t.prototype.getTooltipClass=function(){return"seen-state-title-bubble"},t.prototype.getInitialsColor=function(){return this.isGuestAvatar()?s.colorValueForAvatarName(this.props.userInfo.userId):s.colorValueForAvatarName(this.props.userInfo.displayName)},t.prototype.getTooltipElement=function(){var e;e=this.props.userInfo.isActive?this.onlineTooltipTemplate():null!=this.props.userInfo.whenLastSeen?this.offlineTooltipTemplate():this.accessNameTooltipTemplate(this.props.userInfo.accessLevel);var t=d.reactFormat(e,{user_name:u.Emstring.em_snippet(this.props.userInfo.displayName,10),b:n.createElement("b",{key:"thebold"}),newline:n.createElement("br",{key:"thenewline"})});return n.createElement("span",null,t)},t})(v);t.UserAvatar=g;var T=(function(e){function t(t){return e.call(this,t)||this}return o.__extends(t,e),t.prototype.getDisplayNum=function(){return this.props.moreFacepileCount>=p.MAX_OVERFLOW_BUTTON_INDICATOR?p.MAX_OVERFLOW_BUTTON_INDICATOR:this.props.moreFacepileCount},t.prototype.getMoreFacepileCountText=function(){return this.props.moreFacepileCount>=p.MAX_OVERFLOW_BUTTON_INDICATOR?p.MAX_OVERFLOW_BUTTON_INDICATOR+"+":""+this.props.moreFacepileCount},t.prototype.getAvatar=function(){return n.createElement(a.InitialsAvatar,{alt:this.getMoreFacepileCountText(),dimension:32,initials:this.getMoreFacepileCountText(),color:"#7B8994",shape:"CIRCLE",optionalClass:"c-avatar--overflow"})},t.prototype.getTooltipClass=function(){return"seen-state-title-bubble facepile-overflow"},t.prototype.getTooltipElement=function(){return _.ungettext("%(display_num)s other","%(display_num)s others",this.getDisplayNum()).format({display_num:this.getMoreFacepileCountText()})},t})(v);t.OverflowAvatar=T});
//# sourceMappingURL=avatars.min.js-vflBY3JIp.map